<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>orderpack: m_ctrper Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">orderpack
   </div>
   <div id="projectbrief">orderpack module (Fortran)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">m_ctrper Module Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacem__ctrper_1_1ctrper.html">ctrper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a18c973de9dc34464ce69cd3a03428b3a"><td class="memItemLeft" align="right" valign="top">subroutine, private&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__ctrper.html#a18c973de9dc34464ce69cd3a03428b3a">real64_ctrper</a> (XDONT, PCLS)</td></tr>
<tr class="separator:a18c973de9dc34464ce69cd3a03428b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c552c42eed06299e94f7b1365b679bc"><td class="memItemLeft" align="right" valign="top">subroutine, private&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__ctrper.html#a9c552c42eed06299e94f7b1365b679bc">real32_ctrper</a> (XDONT, PCLS)</td></tr>
<tr class="separator:a9c552c42eed06299e94f7b1365b679bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43f8d1b4420bd2b501cf716b8de5339b"><td class="memItemLeft" align="right" valign="top">subroutine, private&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__ctrper.html#a43f8d1b4420bd2b501cf716b8de5339b">int32_ctrper</a> (XDONT, PCLS)</td></tr>
<tr class="separator:a43f8d1b4420bd2b501cf716b8de5339b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a43f8d1b4420bd2b501cf716b8de5339b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43f8d1b4420bd2b501cf716b8de5339b">&#9670;&nbsp;</a></span>int32_ctrper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, private m_ctrper::int32_ctrper </td>
          <td>(</td>
          <td class="paramtype">integer (kind=int32), dimension (:), intent(inout)&#160;</td>
          <td class="paramname"><em>XDONT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>PCLS</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">! _________________________________________________________</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordtype">Integer (kind=int32)</span>, <span class="keywordtype">Dimension (:)</span>, <span class="keywordtype">Intent (InOut)</span> :: XDONT</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="keywordtype">      Real</span>, <span class="keywordtype">Intent (In)</span> :: PCLS</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">! __________________________________________________________</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">!</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keywordtype">      Real</span>, <span class="keywordtype">Dimension (Size(XDONT))</span> :: XINDT</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordtype">Integer</span>, <span class="keywordtype">Dimension (Size(XDONT))</span> :: JWRKT</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keywordtype">      Real</span> :: PWRK</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordtype">Integer</span> :: I</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">!</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keyword">Call </span>random_number (xindt(:))</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      pwrk = min(max(0.0, pcls), 1.0)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      xindt = real(<span class="keyword">Size</span>(xdont)) * xindt</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      xindt = pwrk*xindt + (1.0-pwrk)*[ (real(i), i=1,<span class="keyword">size</span>(xdont)) ]</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keyword">Call </span>mrgrnk (xindt, jwrkt)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      xdont = xdont(jwrkt)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">!</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c552c42eed06299e94f7b1365b679bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c552c42eed06299e94f7b1365b679bc">&#9670;&nbsp;</a></span>real32_ctrper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, private m_ctrper::real32_ctrper </td>
          <td>(</td>
          <td class="paramtype">real (kind=real32), dimension (:), intent(inout)&#160;</td>
          <td class="paramname"><em>XDONT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>PCLS</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">! _________________________________________________________</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keywordtype">      Real</span> (kind=real32), <span class="keywordtype">Dimension (:)</span>, <span class="keywordtype">Intent (InOut)</span> :: xdont</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keywordtype">      Real</span>, <span class="keywordtype">Intent (In)</span> :: PCLS</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">! __________________________________________________________</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">!</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">      Real</span>, <span class="keywordtype">Dimension (Size(XDONT))</span> :: XINDT</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordtype">Integer</span>, <span class="keywordtype">Dimension (Size(XDONT))</span> :: JWRKT</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keywordtype">      Real</span> :: PWRK</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="keywordtype">Integer</span> :: I</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">!</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keyword">Call </span>random_number (xindt(:))</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      pwrk = min(max(0.0, pcls), 1.0)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      xindt = real(<span class="keyword">Size</span>(xdont)) * xindt</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      xindt = pwrk*xindt + (1.0-pwrk)*[ (real(i), i=1,<span class="keyword">size</span>(xdont)) ]</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <span class="keyword">Call </span>mrgrnk (xindt, jwrkt)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      xdont = xdont(jwrkt)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">!</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a18c973de9dc34464ce69cd3a03428b3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18c973de9dc34464ce69cd3a03428b3a">&#9670;&nbsp;</a></span>real64_ctrper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, private m_ctrper::real64_ctrper </td>
          <td>(</td>
          <td class="paramtype">real (kind=real64), dimension (:), intent(inout)&#160;</td>
          <td class="paramname"><em>XDONT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>PCLS</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<h2><a class="anchor" id="autotoc_md0"></a>
NAME</h2>
<p>ctrper(3f) - [orderpack] generate a random permutation of an array leaving elements close to initial locations (LICENSE:CC0-1.0)</p>
<h2><a class="anchor" id="autotoc_md1"></a>
SYNOPSIS</h2>
<pre class="fragment"> Subroutine ctrper (XDONT, PCLS)

  ${TYPE} (kind=${KIND}), Intent (InOut) :: XDONT(:)
  Real, Intent (In) :: PCLS

Where ${TYPE}(kind=${KIND}) may be

   o Real(kind=real32)
   o Real(kind=real64)
   o Integer(kind=int32)
</pre><h2><a class="anchor" id="autotoc_md2"></a>
DESCRIPTION</h2>
<p>Permute array XDONT randomly, but leaving elements close to their initial locations (nearbyness is controlled by PCLS).</p>
<p>The routine creates a real array of the indices of XDONT() perturbed by random values that are based on the size of PCLS. The new array is then ranked and the resulting index is used to permute the input array.</p>
<p>The relative proportion of initial order and random order is defined as 1-PCLS / PCLS, thus when PCLS = 0, there is no change in the order whereas the new order is fully random when PCLS = 1.</p>
<p>Note this differs from adding random noise to the values. The original values remain unchanged, their order is just perturbed.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
OPTIONS</h2>
<p>XDONT Array of values to perturb. PCLS Proportion of closeness, constrained to the range 0.0(no change) to 1.0(fully random).</p>
<h2><a class="anchor" id="autotoc_md4"></a>
EXAMPLES</h2>
<p>Sample program:</p>
<p>program demo_ctrper use M_ctrper, only : ctrper implicit none integer,allocatable :: xdont(:) integer,allocatable :: xout(:,:) real :: pcls integer :: isz, i, j isz=200 if(allocated(xout))deallocate(xout) allocate(xout(3,isz))</p>
<p>xdont=[(i,i=1,isz)]*10 call ctrper(xdont,0.0) xout(1,:)=xdont</p>
<p>xdont=[(i,i=1,isz)]*10 call ctrper(xdont,0.1) xout(2,:)=xdont</p>
<p>xdont=[(i,i=1,isz)]*10 call ctrper(xdont,1.0) xout(3,:)=xdont</p>
<p>write(*,'(a)')'count unchanged perturbed random' do i=1,size(xdont) write(*,'(*(i8,1x))')i,xout(:,i) enddo</p>
<p>end program demo_ctrper</p>
<p>Results:</p>
<h2><a class="anchor" id="autotoc_md5"></a>
AUTHOR</h2>
<p>Michel Olagnon, 2000-2012</p>
<p>John Urban, 2022.04.16 o added man-page and reduced to a template using the prep(1) preprocessor.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
LICENSE</h2>
<p>CC0-1.0 </p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">! _________________________________________________________</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keywordtype">      Real</span> (kind=real64), <span class="keywordtype">Dimension (:)</span>, <span class="keywordtype">Intent (InOut)</span> :: xdont</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keywordtype">      Real</span>, <span class="keywordtype">Intent (In)</span> :: PCLS</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">! __________________________________________________________</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">!</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keywordtype">      Real</span>, <span class="keywordtype">Dimension (Size(XDONT))</span> :: XINDT</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="keywordtype">Integer</span>, <span class="keywordtype">Dimension (Size(XDONT))</span> :: JWRKT</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keywordtype">      Real</span> :: PWRK</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="keywordtype">Integer</span> :: I</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">!</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keyword">Call </span>random_number (xindt(:))</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      pwrk = min(max(0.0, pcls), 1.0)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      xindt = real(<span class="keyword">Size</span>(xdont)) * xindt</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      xindt = pwrk*xindt + (1.0-pwrk)*[ (real(i), i=1,<span class="keyword">size</span>(xdont)) ]</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keyword">Call </span>mrgrnk (xindt, jwrkt)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      xdont = xdont(jwrkt)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">!</span></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

\hypertarget{interfacem__ctrper_1_1ctrper}{}\doxysection{m\+\_\+ctrper\+::ctrper Interface Reference}
\label{interfacem__ctrper_1_1ctrper}\index{m\_ctrper::ctrper@{m\_ctrper::ctrper}}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
subroutine \mbox{\hyperlink{interfacem__ctrper_1_1ctrper_ad919a2921914cfa993d557f766bc9107}{real64\+\_\+ctrper}} (X\+D\+O\+NT, P\+C\+LS)
\item 
subroutine \mbox{\hyperlink{interfacem__ctrper_1_1ctrper_abe3d023f50fc071de343c1af2355a775}{real32\+\_\+ctrper}} (X\+D\+O\+NT, P\+C\+LS)
\item 
subroutine \mbox{\hyperlink{interfacem__ctrper_1_1ctrper_a642ce19e1d04724f3aab4affe9fc4e77}{int32\+\_\+ctrper}} (X\+D\+O\+NT, P\+C\+LS)
\end{DoxyCompactItemize}


\doxysubsection{Member Function/\+Subroutine Documentation}
\mbox{\Hypertarget{interfacem__ctrper_1_1ctrper_a642ce19e1d04724f3aab4affe9fc4e77}\label{interfacem__ctrper_1_1ctrper_a642ce19e1d04724f3aab4affe9fc4e77}} 
\index{m\_ctrper::ctrper@{m\_ctrper::ctrper}!int32\_ctrper@{int32\_ctrper}}
\index{int32\_ctrper@{int32\_ctrper}!m\_ctrper::ctrper@{m\_ctrper::ctrper}}
\doxysubsubsection{\texorpdfstring{int32\_ctrper()}{int32\_ctrper()}}
{\footnotesize\ttfamily subroutine m\+\_\+ctrper\+::ctrper\+::int32\+\_\+ctrper (\begin{DoxyParamCaption}\item[{integer (kind=int32), dimension (\+:), intent(inout)}]{X\+D\+O\+NT,  }\item[{real, intent(in)}]{P\+C\+LS }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{164 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{165       \textcolor{keywordtype}{Integer (kind=int32)}, \textcolor{keywordtype}{Dimension (:)}, \textcolor{keywordtype}{Intent (InOut)} :: XDONT}
\DoxyCodeLine{166 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Intent (In)} :: PCLS}
\DoxyCodeLine{167 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{168 \textcolor{comment}{!}}
\DoxyCodeLine{169 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: XINDT}
\DoxyCodeLine{170       \textcolor{keywordtype}{Integer}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: JWRKT}
\DoxyCodeLine{171 \textcolor{keywordtype}{      Real} :: PWRK}
\DoxyCodeLine{172       \textcolor{keywordtype}{Integer} :: I}
\DoxyCodeLine{173 \textcolor{comment}{!}}
\DoxyCodeLine{174       \textcolor{keyword}{Call }random\_number (xindt(:))}
\DoxyCodeLine{175       pwrk = min(max(0.0, pcls), 1.0)}
\DoxyCodeLine{176       xindt = real(\textcolor{keyword}{Size}(xdont)) * xindt}
\DoxyCodeLine{177       xindt = pwrk*xindt + (1.0-\/pwrk)*[ (real(i), i=1,\textcolor{keyword}{size}(xdont)) ]}
\DoxyCodeLine{178       \textcolor{keyword}{Call }mrgrnk (xindt, jwrkt)}
\DoxyCodeLine{179       xdont = xdont(jwrkt)}
\DoxyCodeLine{180 \textcolor{comment}{!}}

\end{DoxyCode}
\mbox{\Hypertarget{interfacem__ctrper_1_1ctrper_abe3d023f50fc071de343c1af2355a775}\label{interfacem__ctrper_1_1ctrper_abe3d023f50fc071de343c1af2355a775}} 
\index{m\_ctrper::ctrper@{m\_ctrper::ctrper}!real32\_ctrper@{real32\_ctrper}}
\index{real32\_ctrper@{real32\_ctrper}!m\_ctrper::ctrper@{m\_ctrper::ctrper}}
\doxysubsubsection{\texorpdfstring{real32\_ctrper()}{real32\_ctrper()}}
{\footnotesize\ttfamily subroutine m\+\_\+ctrper\+::ctrper\+::real32\+\_\+ctrper (\begin{DoxyParamCaption}\item[{real (kind=real32), dimension (\+:), intent(inout)}]{X\+D\+O\+NT,  }\item[{real, intent(in)}]{P\+C\+LS }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{145 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{146 \textcolor{keywordtype}{      Real} (kind=real32), \textcolor{keywordtype}{Dimension (:)}, \textcolor{keywordtype}{Intent (InOut)} :: xdont}
\DoxyCodeLine{147 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Intent (In)} :: PCLS}
\DoxyCodeLine{148 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{149 \textcolor{comment}{!}}
\DoxyCodeLine{150 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: XINDT}
\DoxyCodeLine{151       \textcolor{keywordtype}{Integer}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: JWRKT}
\DoxyCodeLine{152 \textcolor{keywordtype}{      Real} :: PWRK}
\DoxyCodeLine{153       \textcolor{keywordtype}{Integer} :: I}
\DoxyCodeLine{154 \textcolor{comment}{!}}
\DoxyCodeLine{155       \textcolor{keyword}{Call }random\_number (xindt(:))}
\DoxyCodeLine{156       pwrk = min(max(0.0, pcls), 1.0)}
\DoxyCodeLine{157       xindt = real(\textcolor{keyword}{Size}(xdont)) * xindt}
\DoxyCodeLine{158       xindt = pwrk*xindt + (1.0-\/pwrk)*[ (real(i), i=1,\textcolor{keyword}{size}(xdont)) ]}
\DoxyCodeLine{159       \textcolor{keyword}{Call }mrgrnk (xindt, jwrkt)}
\DoxyCodeLine{160       xdont = xdont(jwrkt)}
\DoxyCodeLine{161 \textcolor{comment}{!}}

\end{DoxyCode}
\mbox{\Hypertarget{interfacem__ctrper_1_1ctrper_ad919a2921914cfa993d557f766bc9107}\label{interfacem__ctrper_1_1ctrper_ad919a2921914cfa993d557f766bc9107}} 
\index{m\_ctrper::ctrper@{m\_ctrper::ctrper}!real64\_ctrper@{real64\_ctrper}}
\index{real64\_ctrper@{real64\_ctrper}!m\_ctrper::ctrper@{m\_ctrper::ctrper}}
\doxysubsubsection{\texorpdfstring{real64\_ctrper()}{real64\_ctrper()}}
{\footnotesize\ttfamily subroutine m\+\_\+ctrper\+::ctrper\+::real64\+\_\+ctrper (\begin{DoxyParamCaption}\item[{real (kind=real64), dimension (\+:), intent(inout)}]{X\+D\+O\+NT,  }\item[{real, intent(in)}]{P\+C\+LS }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

\hypertarget{namespacem__ctrper_autotoc_md0}{}\doxysubsubsection{N\+A\+ME}\label{namespacem__ctrper_autotoc_md0}
ctrper(3f) -\/ \mbox{[}orderpack\+:P\+E\+R\+M\+U\+T\+A\+T\+I\+ON\mbox{]} generate a random permutation of an array leaving elements close to initial locations (L\+I\+C\+E\+N\+SE\+:C\+C0-\/1.\+0)\hypertarget{namespacem__ctrper_autotoc_md1}{}\doxysubsubsection{S\+Y\+N\+O\+P\+S\+IS}\label{namespacem__ctrper_autotoc_md1}
\begin{DoxyVerb} Subroutine ctrper (XDONT, PCLS)

  ${TYPE} (kind=${KIND}), Intent (InOut) :: XDONT(:)
  Real, Intent (In) :: PCLS

Where ${TYPE}(kind=${KIND}) may be

   o Real(kind=real32)
   o Real(kind=real64)
   o Integer(kind=int32)
\end{DoxyVerb}
\hypertarget{namespacem__ctrper_autotoc_md2}{}\doxysubsubsection{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}\label{namespacem__ctrper_autotoc_md2}
Permute array X\+D\+O\+NT randomly, but leaving elements close to their initial locations (nearbyness is controlled by P\+C\+LS).

The routine creates a real array of the indices of X\+D\+O\+N\+T() perturbed by random values that are based on the size of P\+C\+LS. The new array is then ranked and the resulting index is used to permute the input array.

The relative proportion of initial order and random order is defined as 1-\/P\+C\+LS / P\+C\+LS, thus when P\+C\+LS = 0, there is no change in the order whereas the new order is fully random when P\+C\+LS = 1.

Note this differs from adding random noise to the values. The original values remain unchanged, their order is just perturbed.\hypertarget{namespacem__ctrper_autotoc_md3}{}\doxysubsubsection{O\+P\+T\+I\+O\+NS}\label{namespacem__ctrper_autotoc_md3}
X\+D\+O\+NT Array of values to perturb. P\+C\+LS Proportion of closeness, constrained to the range 0.\+0(no change) to 1.\+0(fully random).\hypertarget{namespacem__ctrper_autotoc_md4}{}\doxysubsubsection{E\+X\+A\+M\+P\+L\+ES}\label{namespacem__ctrper_autotoc_md4}
Sample program\+:

program demo\+\_\+ctrper use M\+\_\+ctrper, only \+: ctrper implicit none integer,allocatable \+:: xdont(\+:) integer,allocatable \+:: xout(\+:,\+:) real \+:: pcls integer \+:: isz, i, j isz=200 if(allocated(xout))deallocate(xout) allocate(xout(3,isz))

xdont=\mbox{[}(i,i=1,isz)\mbox{]}$\ast$10 call ctrper(xdont,0.\+0) xout(1,\+:)=xdont

xdont=\mbox{[}(i,i=1,isz)\mbox{]}$\ast$10 call ctrper(xdont,0.\+1) xout(2,\+:)=xdont

xdont=\mbox{[}(i,i=1,isz)\mbox{]}$\ast$10 call ctrper(xdont,1.\+0) xout(3,\+:)=xdont

write($\ast$,\textquotesingle{}(a)\textquotesingle{})\textquotesingle{}count unchanged perturbed random\textquotesingle{} do i=1,size(xdont) write($\ast$,\textquotesingle{}($\ast$(i8,1x))\textquotesingle{})i,xout(\+:,i) enddo

end program demo\+\_\+ctrper

Results\+:

$>$ count unchanged perturbed random $>$ 1 10 30 1930 $>$ 2 20 20 1430 $>$ 3 30 120 320 $>$ 4 40 110 670 $>$ 5 50 90 750 $>$ 6 60 60 790 $>$ 7 70 130 1850 $>$ 8 80 50 390 $>$ 9 90 150 1470 $>$ 10 100 80 710 $>$ 11 110 70 820 $>$ 12 120 10 680 $>$ . . . . $>$ . . . . $>$ . . . . $>$ . . . . $>$ 190 1900 1860 1210 $>$ 191 1910 1890 580 $>$ 192 1920 1840 600 $>$ 193 1930 1870 1640 $>$ 194 1940 1920 290 $>$ 195 1950 2000 1180 $>$ 196 1960 1910 340 $>$ 197 1970 1990 1540 $>$ 198 1980 1940 990 $>$ 199 1990 1950 470 $>$ 200 2000 1980 200\hypertarget{namespacem__ctrper_autotoc_md5}{}\doxysubsubsection{A\+U\+T\+H\+OR}\label{namespacem__ctrper_autotoc_md5}
Michel Olagnon, 2000-\/2012

John Urban, 2022.\+04.\+16 o added man-\/page and reduced to a template using the prep(1) preprocessor.\hypertarget{namespacem__ctrper_autotoc_md6}{}\doxysubsubsection{L\+I\+C\+E\+N\+SE}\label{namespacem__ctrper_autotoc_md6}
C\+C0-\/1.\+0 
\begin{DoxyCode}{0}
\DoxyCodeLine{126 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{127 \textcolor{keywordtype}{      Real} (kind=real64), \textcolor{keywordtype}{Dimension (:)}, \textcolor{keywordtype}{Intent (InOut)} :: xdont}
\DoxyCodeLine{128 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Intent (In)} :: PCLS}
\DoxyCodeLine{129 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{130 \textcolor{comment}{!}}
\DoxyCodeLine{131 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: XINDT}
\DoxyCodeLine{132       \textcolor{keywordtype}{Integer}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: JWRKT}
\DoxyCodeLine{133 \textcolor{keywordtype}{      Real} :: PWRK}
\DoxyCodeLine{134       \textcolor{keywordtype}{Integer} :: I}
\DoxyCodeLine{135 \textcolor{comment}{!}}
\DoxyCodeLine{136       \textcolor{keyword}{Call }random\_number (xindt(:))}
\DoxyCodeLine{137       pwrk = min(max(0.0, pcls), 1.0)}
\DoxyCodeLine{138       xindt = real(\textcolor{keyword}{Size}(xdont)) * xindt}
\DoxyCodeLine{139       xindt = pwrk*xindt + (1.0-\/pwrk)*[ (real(i), i=1,\textcolor{keyword}{size}(xdont)) ]}
\DoxyCodeLine{140       \textcolor{keyword}{Call }mrgrnk (xindt, jwrkt)}
\DoxyCodeLine{141       xdont = xdont(jwrkt)}
\DoxyCodeLine{142 \textcolor{comment}{!}}

\end{DoxyCode}


The documentation for this interface was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/urbanjs/venus/\+V600/github/orderpack/src/\mbox{\hyperlink{M__ctrper_8f90}{M\+\_\+ctrper.\+f90}}\end{DoxyCompactItemize}

\hypertarget{interfacem__ctrper_1_1ctrper}{}\doxysection{m\+\_\+ctrper\+::ctrper Interface Reference}
\label{interfacem__ctrper_1_1ctrper}\index{m\_ctrper::ctrper@{m\_ctrper::ctrper}}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
subroutine \mbox{\hyperlink{interfacem__ctrper_1_1ctrper_ad919a2921914cfa993d557f766bc9107}{real64\+\_\+ctrper}} (X\+D\+O\+NT, P\+C\+LS)
\item 
subroutine \mbox{\hyperlink{interfacem__ctrper_1_1ctrper_abe3d023f50fc071de343c1af2355a775}{real32\+\_\+ctrper}} (X\+D\+O\+NT, P\+C\+LS)
\item 
subroutine \mbox{\hyperlink{interfacem__ctrper_1_1ctrper_a642ce19e1d04724f3aab4affe9fc4e77}{int32\+\_\+ctrper}} (X\+D\+O\+NT, P\+C\+LS)
\item 
subroutine \mbox{\hyperlink{interfacem__ctrper_1_1ctrper_aa257de51d74638f9a785c0c46fe9b249}{f\+\_\+char\+\_\+ctrper}} (X\+D\+O\+NT, P\+C\+LS)
\end{DoxyCompactItemize}


\doxysubsection{Member Function/\+Subroutine Documentation}
\mbox{\Hypertarget{interfacem__ctrper_1_1ctrper_aa257de51d74638f9a785c0c46fe9b249}\label{interfacem__ctrper_1_1ctrper_aa257de51d74638f9a785c0c46fe9b249}} 
\index{m\_ctrper::ctrper@{m\_ctrper::ctrper}!f\_char\_ctrper@{f\_char\_ctrper}}
\index{f\_char\_ctrper@{f\_char\_ctrper}!m\_ctrper::ctrper@{m\_ctrper::ctrper}}
\doxysubsubsection{\texorpdfstring{f\_char\_ctrper()}{f\_char\_ctrper()}}
{\footnotesize\ttfamily subroutine m\+\_\+ctrper\+::ctrper\+::f\+\_\+char\+\_\+ctrper (\begin{DoxyParamCaption}\item[{character (kind=\mbox{\hyperlink{namespacem__ctrper_a2549d1e9c7e73b3c0bcc27afe267ecef}{f\+\_\+char}},len=$\ast$), dimension (\+:), intent(inout)}]{X\+D\+O\+NT,  }\item[{real, intent(in)}]{P\+C\+LS }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{201 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{202       \textcolor{keywordtype}{character (kind=f\_char,len=*)}, \textcolor{keywordtype}{Dimension (:)}, \textcolor{keywordtype}{Intent (InOut)} :: XDONT}
\DoxyCodeLine{203 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Intent (In)} :: PCLS}
\DoxyCodeLine{204 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{205 \textcolor{comment}{!}}
\DoxyCodeLine{206 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: XINDT}
\DoxyCodeLine{207       \textcolor{keywordtype}{Integer}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: JWRKT}
\DoxyCodeLine{208 \textcolor{keywordtype}{      Real} :: PWRK}
\DoxyCodeLine{209       \textcolor{keywordtype}{Integer} :: I}
\DoxyCodeLine{210 \textcolor{comment}{!}}
\DoxyCodeLine{211       \textcolor{keyword}{Call }random\_number (xindt(:))}
\DoxyCodeLine{212       pwrk = min(max(0.0, pcls), 1.0)}
\DoxyCodeLine{213       xindt = real(\textcolor{keyword}{Size}(xdont)) * xindt}
\DoxyCodeLine{214       xindt = pwrk*xindt + (1.0-\/pwrk)*[ (real(i), i=1,\textcolor{keyword}{size}(xdont)) ]}
\DoxyCodeLine{215       \textcolor{keyword}{Call }mrgrnk (xindt, jwrkt)}
\DoxyCodeLine{216       xdont = xdont(jwrkt)}
\DoxyCodeLine{217 \textcolor{comment}{!}}

\end{DoxyCode}
\mbox{\Hypertarget{interfacem__ctrper_1_1ctrper_a642ce19e1d04724f3aab4affe9fc4e77}\label{interfacem__ctrper_1_1ctrper_a642ce19e1d04724f3aab4affe9fc4e77}} 
\index{m\_ctrper::ctrper@{m\_ctrper::ctrper}!int32\_ctrper@{int32\_ctrper}}
\index{int32\_ctrper@{int32\_ctrper}!m\_ctrper::ctrper@{m\_ctrper::ctrper}}
\doxysubsubsection{\texorpdfstring{int32\_ctrper()}{int32\_ctrper()}}
{\footnotesize\ttfamily subroutine m\+\_\+ctrper\+::ctrper\+::int32\+\_\+ctrper (\begin{DoxyParamCaption}\item[{integer (kind=int32), dimension (\+:), intent(inout)}]{X\+D\+O\+NT,  }\item[{real, intent(in)}]{P\+C\+LS }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{182 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{183       \textcolor{keywordtype}{Integer (kind=int32)}, \textcolor{keywordtype}{Dimension (:)}, \textcolor{keywordtype}{Intent (InOut)} :: XDONT}
\DoxyCodeLine{184 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Intent (In)} :: PCLS}
\DoxyCodeLine{185 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{186 \textcolor{comment}{!}}
\DoxyCodeLine{187 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: XINDT}
\DoxyCodeLine{188       \textcolor{keywordtype}{Integer}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: JWRKT}
\DoxyCodeLine{189 \textcolor{keywordtype}{      Real} :: PWRK}
\DoxyCodeLine{190       \textcolor{keywordtype}{Integer} :: I}
\DoxyCodeLine{191 \textcolor{comment}{!}}
\DoxyCodeLine{192       \textcolor{keyword}{Call }random\_number (xindt(:))}
\DoxyCodeLine{193       pwrk = min(max(0.0, pcls), 1.0)}
\DoxyCodeLine{194       xindt = real(\textcolor{keyword}{Size}(xdont)) * xindt}
\DoxyCodeLine{195       xindt = pwrk*xindt + (1.0-\/pwrk)*[ (real(i), i=1,\textcolor{keyword}{size}(xdont)) ]}
\DoxyCodeLine{196       \textcolor{keyword}{Call }mrgrnk (xindt, jwrkt)}
\DoxyCodeLine{197       xdont = xdont(jwrkt)}
\DoxyCodeLine{198 \textcolor{comment}{!}}

\end{DoxyCode}
\mbox{\Hypertarget{interfacem__ctrper_1_1ctrper_abe3d023f50fc071de343c1af2355a775}\label{interfacem__ctrper_1_1ctrper_abe3d023f50fc071de343c1af2355a775}} 
\index{m\_ctrper::ctrper@{m\_ctrper::ctrper}!real32\_ctrper@{real32\_ctrper}}
\index{real32\_ctrper@{real32\_ctrper}!m\_ctrper::ctrper@{m\_ctrper::ctrper}}
\doxysubsubsection{\texorpdfstring{real32\_ctrper()}{real32\_ctrper()}}
{\footnotesize\ttfamily subroutine m\+\_\+ctrper\+::ctrper\+::real32\+\_\+ctrper (\begin{DoxyParamCaption}\item[{real (kind=real32), dimension (\+:), intent(inout)}]{X\+D\+O\+NT,  }\item[{real, intent(in)}]{P\+C\+LS }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{163 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{164 \textcolor{keywordtype}{      Real} (kind=real32), \textcolor{keywordtype}{Dimension (:)}, \textcolor{keywordtype}{Intent (InOut)} :: xdont}
\DoxyCodeLine{165 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Intent (In)} :: PCLS}
\DoxyCodeLine{166 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{167 \textcolor{comment}{!}}
\DoxyCodeLine{168 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: XINDT}
\DoxyCodeLine{169       \textcolor{keywordtype}{Integer}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: JWRKT}
\DoxyCodeLine{170 \textcolor{keywordtype}{      Real} :: PWRK}
\DoxyCodeLine{171       \textcolor{keywordtype}{Integer} :: I}
\DoxyCodeLine{172 \textcolor{comment}{!}}
\DoxyCodeLine{173       \textcolor{keyword}{Call }random\_number (xindt(:))}
\DoxyCodeLine{174       pwrk = min(max(0.0, pcls), 1.0)}
\DoxyCodeLine{175       xindt = real(\textcolor{keyword}{Size}(xdont)) * xindt}
\DoxyCodeLine{176       xindt = pwrk*xindt + (1.0-\/pwrk)*[ (real(i), i=1,\textcolor{keyword}{size}(xdont)) ]}
\DoxyCodeLine{177       \textcolor{keyword}{Call }mrgrnk (xindt, jwrkt)}
\DoxyCodeLine{178       xdont = xdont(jwrkt)}
\DoxyCodeLine{179 \textcolor{comment}{!}}

\end{DoxyCode}
\mbox{\Hypertarget{interfacem__ctrper_1_1ctrper_ad919a2921914cfa993d557f766bc9107}\label{interfacem__ctrper_1_1ctrper_ad919a2921914cfa993d557f766bc9107}} 
\index{m\_ctrper::ctrper@{m\_ctrper::ctrper}!real64\_ctrper@{real64\_ctrper}}
\index{real64\_ctrper@{real64\_ctrper}!m\_ctrper::ctrper@{m\_ctrper::ctrper}}
\doxysubsubsection{\texorpdfstring{real64\_ctrper()}{real64\_ctrper()}}
{\footnotesize\ttfamily subroutine m\+\_\+ctrper\+::ctrper\+::real64\+\_\+ctrper (\begin{DoxyParamCaption}\item[{real (kind=real64), dimension (\+:), intent(inout)}]{X\+D\+O\+NT,  }\item[{real, intent(in)}]{P\+C\+LS }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

\hypertarget{namespacem__ctrper_autotoc_md0}{}\doxysubsubsection{N\+A\+ME}\label{namespacem__ctrper_autotoc_md0}
ctrper(3f) -\/ \mbox{[}orderpack\+:P\+E\+R\+M\+U\+T\+A\+T\+I\+ON\mbox{]} generate a random permutation of an array leaving elements close to initial locations\hypertarget{namespacem__ctrper_autotoc_md1}{}\doxysubsubsection{S\+Y\+N\+O\+P\+S\+IS}\label{namespacem__ctrper_autotoc_md1}
\begin{DoxyVerb} Subroutine ctrper (XDONT, PCLS)

  ${TYPE} (kind=${KIND}), Intent (InOut) :: XDONT(:)
  Real, Intent (In)                      :: PCLS

Where ${TYPE}(kind=${KIND}) may be

   o Real(kind=real32)
   o Real(kind=real64)
   o Integer(kind=int32)
   o Character(kind=selected_char_kind("DEFAULT"),len=*)
\end{DoxyVerb}
\hypertarget{namespacem__ctrper_autotoc_md2}{}\doxysubsubsection{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}\label{namespacem__ctrper_autotoc_md2}
Shuffle the array X\+D\+O\+NT randomly, leaving elements close to their initial locations.

Nearbyness is controlled by P\+C\+LS. The relative proportion of initial order and random order is defined as 1-\/P\+C\+LS / P\+C\+LS, thus when P\+C\+LS = 0, there is no change in the order whereas the new order is fully random when P\+C\+LS = 1.

Note this differs from adding random noise to the values. The original values remain unchanged, their order is just perturbed.

Internally, the routine creates a real array of the indices of X\+D\+O\+N\+T() perturbed by random values that are based on the size of P\+C\+LS. The new array is then ranked and the resulting index is used to permute the input array.\hypertarget{namespacem__ctrper_autotoc_md3}{}\doxysubsubsection{O\+P\+T\+I\+O\+NS}\label{namespacem__ctrper_autotoc_md3}
X\+D\+O\+NT Array of values to perturb. P\+C\+LS Proportion of closeness, constrained to the range 0.\+0(no change) to 1.\+0(fully random).\hypertarget{namespacem__ctrper_autotoc_md4}{}\doxysubsubsection{E\+X\+A\+M\+P\+L\+ES}\label{namespacem__ctrper_autotoc_md4}
Sample program\+:

program demo\+\_\+ctrper ! generate a random perturbation of an array use M\+\_\+ctrper, only \+: ctrper implicit none character(len=$\ast$),parameter \+:: g=\textquotesingle{}($\ast$(g0,1x))\textquotesingle{} character(len=$\ast$),parameter \+:: list= \textquotesingle{}($\ast$(g0\+:,\char`\"{}, \char`\"{}))\textquotesingle{} integer,allocatable \+:: xout(\+:,\+:) integer \+:: isz, i, j isz=200 ! randomly pertube location of values ! ! make an array with three identical rows if(allocated(xout))deallocate(xout) allocate(xout(3,isz)) xout(1,\+:)=\mbox{[}(i,i=isz,1,-\/1)\mbox{]}$\ast$10 xout(2,\+:)=xout(1,\+:) xout(3,\+:)=xout(1,\+:) ! pertube each row a different amount call ctrper(xout(1,\+:),0.\+0) call ctrper(xout(2,\+:),0.\+1) call ctrper(xout(3,\+:),1.\+0) ! show values write($\ast$,\textquotesingle{}(a)\textquotesingle{})\textquotesingle{}count unchanged perturbed random\textquotesingle{} do i=1,size(xout,dim=2) write($\ast$,\textquotesingle{}($\ast$(i8,1x))\textquotesingle{})i,xout(\+:,i) enddo char\+: block character(len=\+:),allocatable \+:: cdont(\+:) cdont=\mbox{[}character(len=20) \+:: \textquotesingle{}a\textquotesingle{}, \textquotesingle{}be\textquotesingle{}, \textquotesingle{}car\textquotesingle{}, \textquotesingle{}dam\textquotesingle{},\textquotesingle{}fan\textquotesingle{},\textquotesingle{}gas\textquotesingle{},\textquotesingle{}egg\textquotesingle{}\mbox{]} isz=size(cdont) write($\ast$,g)\textquotesingle{}Original.................\+:\textquotesingle{},(trim(cdont(i)),i=1,isz) call ctrper(cdont,1.\+0) write($\ast$,g)\textquotesingle{}Perturbed ...............\+:\textquotesingle{},(trim(cdont(i)),i=1,isz) write($\ast$,g) endblock char

end program demo\+\_\+ctrper

Results\+:

count unchanged perturbed random 1 2000 1980 80 2 1990 1990 580 3 1980 1890 1690 4 1970 1900 1340 5 1960 1920 1260 6 1950 1950 1220 7 1940 1880 160 8 1930 1960 1620 9 1920 1860 540 10 1910 1930 1300 11 1900 1940 1190 . . . . . . . . . . . . . . . . 189 120 80 1200 190 110 150 800 191 100 120 1430 192 90 170 1410 193 80 140 370 194 70 90 1720 195 60 10 830 196 50 100 1670 197 40 20 470 198 30 70 1020 199 20 60 1540 200 10 30 1810 Original.................\+: a be car dam fan gas egg Perturbed ...............\+: a be gas dam fan car egg

\DoxyHorRuler{0}
 \`{}\`{}\`{}

Results\+:\hypertarget{namespacem__ctrper_autotoc_md6}{}\doxysubsubsection{A\+U\+T\+H\+OR}\label{namespacem__ctrper_autotoc_md6}
Michel Olagnon, 2000-\/2012

John Urban, 2022.\+04.\+16 o added man-\/page and reduced to a template using the prep(1) preprocessor.\hypertarget{namespacem__ctrper_autotoc_md7}{}\doxysubsubsection{L\+I\+C\+E\+N\+SE}\label{namespacem__ctrper_autotoc_md7}
C\+C0-\/1.\+0 
\begin{DoxyCode}{0}
\DoxyCodeLine{144 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{145 \textcolor{keywordtype}{      Real} (kind=real64), \textcolor{keywordtype}{Dimension (:)}, \textcolor{keywordtype}{Intent (InOut)} :: xdont}
\DoxyCodeLine{146 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Intent (In)} :: PCLS}
\DoxyCodeLine{147 \textcolor{comment}{! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}}
\DoxyCodeLine{148 \textcolor{comment}{!}}
\DoxyCodeLine{149 \textcolor{keywordtype}{      Real}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: XINDT}
\DoxyCodeLine{150       \textcolor{keywordtype}{Integer}, \textcolor{keywordtype}{Dimension (Size(XDONT))} :: JWRKT}
\DoxyCodeLine{151 \textcolor{keywordtype}{      Real} :: PWRK}
\DoxyCodeLine{152       \textcolor{keywordtype}{Integer} :: I}
\DoxyCodeLine{153 \textcolor{comment}{!}}
\DoxyCodeLine{154       \textcolor{keyword}{Call }random\_number (xindt(:))}
\DoxyCodeLine{155       pwrk = min(max(0.0, pcls), 1.0)}
\DoxyCodeLine{156       xindt = real(\textcolor{keyword}{Size}(xdont)) * xindt}
\DoxyCodeLine{157       xindt = pwrk*xindt + (1.0-\/pwrk)*[ (real(i), i=1,\textcolor{keyword}{size}(xdont)) ]}
\DoxyCodeLine{158       \textcolor{keyword}{Call }mrgrnk (xindt, jwrkt)}
\DoxyCodeLine{159       xdont = xdont(jwrkt)}
\DoxyCodeLine{160 \textcolor{comment}{!}}

\end{DoxyCode}


The documentation for this interface was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/urbanjs/venus/\+V600/github/orderpack/src/\mbox{\hyperlink{M__ctrper_8f90}{M\+\_\+ctrper.\+f90}}\end{DoxyCompactItemize}
